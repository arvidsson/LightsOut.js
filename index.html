<!doctype html>
<html lang="en">
<head>
    <title>LightsOut</title>
    <meta name="description" content="A simple lights out clone.">
    <meta name="keywords" content="HTML5, Javascript, Game, Lights Out, Pär Arvidsson">
    <meta name="author" content="Pär Arvidsson">
    <meta charset="utf-8">
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
        }

        canvas {
            position: absolute;
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="LightsOut.js"></script>
    <script>
        function main() {
            window.game = new LightsOut();
            var g = window.game;
            g.init();
            window.canvas = document.getElementById("theCanvas");
            window.scaleFactor = Math.min(window.innerWidth / g.width, window.innerHeight / g.height);
            window.canvas.width = Math.floor(g.width * window.scaleFactor);
            window.canvas.height = Math.floor(g.height * window.scaleFactor);
            window.context = canvas.getContext("2d");
            window.canvas.addEventListener('click', function(e) {
                // translate mouse coordinates to canvas resolution before we pass them along
                var rect = window.canvas.getBoundingClientRect();
                var x = (e.clientX - rect.left) / (window.innerWidth / g.width);
                var y = (e.clientY - rect.top) / (window.innerHeight / g.height);
                g.update(window.context, x, y);
            }, false);
            g.render(window.context);
        };

        window.onresize = function() {
            var g = window.game;
            window.scaleFactor = Math.min(window.innerWidth / g.width, window.innerHeight / g.height);
            window.canvas.width = Math.floor(g.width * window.scaleFactor);
            window.canvas.height = Math.floor(g.height * window.scaleFactor);
            g.render(window.context);
        };
    </script>
 </head>
 <body onload="main()">
    <canvas id="theCanvas"></canvas>
 </body>
 </html>
 